# Домашнее задание к занятию «Helm»

### Цель задания

В тестовой среде Kubernetes необходимо установить и обновить приложения с помощью Helm.

------

### Чеклист готовности к домашнему заданию

1. Установленное k8s-решение, например, MicroK8S.
2. Установленный локальный kubectl.
3. Установленный локальный Helm.
4. Редактор YAML-файлов с подключенным репозиторием GitHub.

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. [Инструкция](https://helm.sh/docs/intro/install/) по установке Helm. [Helm completion](https://helm.sh/docs/helm/helm_completion/).

------

### Задание 1. Подготовить Helm-чарт для приложения
перед тем как преступить к работе устанавливаю helm 3
установку произведу с помощью snap
![](Pasted%20image%2020250901224258.png)
Добавим репозитарии helm chart
![](Pasted%20image%2020250902231913.png)

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. Каждый компонент приложения деплоится отдельным deployment’ом или statefulset’ом.
3. В переменных чарта измените образ приложения для изменения версии.

------
### Задание 2. Запустить две версии в разных неймспейсах

1. Подготовив чарт, необходимо его проверить. Запуститe несколько копий приложения.
2. Одну версию в namespace=app1, вторую версию в том же неймспейсе, третью версию в namespace=app2.
3. Продемонстрируйте результат.
Последовательность выполнения.
Вначале создал пустой чарт 
![](Pasted%20image%2020250910211416.png)
После удалил ненужные файлы и переписал необходимые 
в результате получил свой чарт
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/cam-chart/Chart.yaml
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/cam-chart/values.yaml
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/values-v2.yaml
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/values-v3.yaml
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/cam-chart/templates/deployment.yaml
https://github.com/ekhristin/netology/blob/main/K8s_Home_10/cam-chart/templates/service.yaml

Затем проверил его на правильность написания
![](Pasted%20image%2020250910222101.png)
после проверил как применяются переменные из файла values
![](Pasted%20image%2020250910222253.png)
убедившись что все правильно отображается приступил к шагу запуска приложений
Создаю необходимые namespace 
![](Pasted%20image%2020250910223243.png)
Согласно заданию запустил одну версию в namespace=app1, вторую версию в том же неймспейсе, третью версию в namespace=app2
Перед запуском еще раз убедимся что все запускается так как надо
![](Pasted%20image%2020250910224457.png)
после попеременно запускаем все приложения 
![](Pasted%20image%2020250910225341.png)
проверяем запущенные chart в двух немспейсах
![](Pasted%20image%2020250910225950.png)
проверяем запущенные дейплойменты и поды в кубере
![](Pasted%20image%2020250910230206.png)
![](Pasted%20image%2020250910230343.png)
для того чтобы детально увидить что установлены разные образы воспользуемся командой 
kubectl get pods --all-namespaces -o custom-columns=NAMESPACE:.metadata.namespace,NAME:.metadata.name,IMAGES:.spec.containers[*].image | grep nginx
![](Pasted%20image%2020250910232046.png)
### Правила приёма работы

1. Домашняя работа оформляется в своём Git репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
2. Файл README.md должен содержать скриншоты вывода необходимых команд `kubectl`, `helm`, а также скриншоты результатов.
3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.

